---
title: llmService.cloneVoice
description: Clones a voice using the LLM service
---

`llmService.cloneVoice()` is a server-side function in the useLLM framework that allows you to clone a voice using the LLM service. It takes an audio URL, voice name, text and optional parameters to customize the cloning process. The function sends requests to an API to generate the cloned voice and returns the URL of the cloned voice audio of the text provided.


### Syntax:

```typescript
const { audioUrlReturn } = await llmService.cloneVoice({
  audioUrl: string,
  voice_name: string,
  text: string,
  quality?: string,
  output_format?: string,
  speed?: number,
  sample_rate?: number,
});
```

### Parameters:

`llmService.cloneVoice()` accepts an object of type `LLMCloneVoiceOptions` with the following properties:

- **audioUrl**: A string representing the URL of the audio to be used for voice cloning.
- **voice_name**: A string representing the name of the cloned voice.
- **text**: A string representing the text to be spoken by the cloned voice.
- **quality** (optional): A string representing the quality of the cloned voice. Possible values are "low", "medium", or "high". The default value is "medium".
- **output_format** (optional): A string representing the output format of the cloned voice audio. The default value is "mp3".
- **speed** (optional): A number representing the speed of the cloned voice. The default value is 1.
- **sample_rate** (optional): A number representing the sample rate of the cloned voice audio. The default value is 24000.

### Returns:

This method returns a Promise that resolves to an object with the following property:

- **audioUrlReturn**: A string representing the URL of the cloned voice audio.

### Error Handling:

`llmService.cloneVoice()` may throw an error if:

- The required parameter `audioUrl` is not provided.
- The required parameter `voice_name` is not provided.
- The required parameter `text` is not provided.
- An error occurs during the API requests to the LLM service.

### Example

Below is an example of how to use `llmService.cloneVoice()` within a server-side function:

```typescript
/* pages/api/clone-voice.ts */

import { createLLMService } from "usellm";

export const config = {
  runtime: "edge",
};

const llmService = createLLMService({
  openaiApiKey: process.env.OPENAI_API_KEY,
  actions: ["cloneVoice"],
});

export default async function handler(request: Request) {
  const body = await request.json();

  try {
    const options = {
      audioUrl: body.audioUrl,
      voice_name: body.voiceName,
      quality: "medium",
      output_format: "mp3",
      speed: 1,
      sample_rate: 24000,
      text: body.text,
    };

    const { audioUrlReturn } = await llmService.cloneVoice(options);
    return new Response(JSON.stringify({ audioUrlReturn }), { status: 200 });
  } catch (error: any) {
    return new Response(error.message, { status: error?.status || 400 });
  }
}
```

In this example, the `llmService.cloneVoice()` method is used to clone a voice using the LLM service. The `options` object is constructed with the required `audioUrl` and `voice_name`, along with optional parameters for quality, output format, speed, sample rate, and text. The `llmService.cloneVoice()` method is then called with the options object, and the resulting `audioUrlReturn` is returned as the response. If an error occurs, an appropriate error response is returned.