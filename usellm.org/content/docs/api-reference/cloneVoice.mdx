---
title: llm.cloneVoice
description: Clones a voice and generates audio in the cloned voice from the provided text.
---

The `llm.cloneVoice()` method allows you to clone a voice by providing an existing audio URL and then generates audio in the cloned voice from the provided text. This function is useful when you want to create a new voice based on an existing voice and convert text into speech using the cloned voice.

### Syntax

```typescript
const { audioUrlReturn } = await cloneVoice({
  audioUrl: string,
  voice_name: string,
  text: string,
  quality?: string,
  output_format?: string,
  speed?: number,
  sample_rate?: number,
});
```

### Parameters

`cloneVoice()` accepts an object of type `LLMCloneVoiceOptions` with the following properties:

- **audioUrl**: A string representing the URL of the audio to be used for voice cloning.
- **voice_name**: A string representing the name of the cloned voice.
- **text**: A string representing the text to be spoken by the cloned voice.
- **quality** (optional): A string representing the quality of the cloned voice. Possible values are "low", "medium", or "high". The default value is "medium".
- **output_format** (optional): A string representing the output format of the cloned voice audio. The default value is "mp3".
- **speed** (optional): A number representing the speed of the cloned voice. The default value is 1.
- **sample_rate** (optional): A number representing the sample rate of the cloned voice audio. The default value is 24000.

### Returns

A Promise that resolves to an object:

- `{ audioUrl: string }`: A URL to the generated audio in the cloned voice.

### Example

Here's an example of how to use `llm.cloneVoice()` in a React component ([live demo](https://usellm.org/demo/clone-voice)):

```jsx
"use client";

import useLLM, { OpenAIMessage } from "usellm";
import { useState } from "react";
import { stat } from "fs";

export default function CloneVoice() {
  const [status, setStatus] = useState<Status>("idle");
  const [audioUrl, setAudioUrl] = useState<string>("");
  const [text, setText] = useState<string>("");
  const [audioUrlReturn, setAudioUrlReturn] = useState<string>("");
  const [name, setName] = useState<string>("");
  const llm = useLLM({
    serviceUrl: "/api/llm", // For testing only. Follow this guide to create your own service URL: https://usellm.org/docs/api-reference/create-llm-service
  });

  async function handleClick() {
    if (status === "idle") {
      await llm.record();
      setStatus("recording");
    } else if (status === "recording") {
      setStatus("cloning");
      const { audioUrl } = await llm.stopRecording();
      setAudioUrl(audioUrl);
      setStatus("idle");
    }
  }

  async function handleSubmit(){
    if(status==="idle"){
      setStatus("Generating Voice");
      const {audioUrlReturn} = await llm.cloneVoice({
        audioUrl: audioUrl,
        voice_name: name,
        text: text,
      });
      setAudioUrlReturn(audioUrlReturn);
      setStatus("idle");
    }
  }

  const Icon = status === "recording" ? Square : Mic;

  return (
    <div className="p-4 flex flex-col items-start overflow-y-scroll">
      <h2 className="font-semibold text-2xl">AI Voice Cloning</h2>
      <button
        className="p-2 border rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-white dark:text-black font-medium mt-4 "
        onClick={handleClick}
      >
      <Icon />
      </button>
      {status !== "idle" && (
        <div className="text-center mt-4 text-lg">{capitalize(status)}...</div>
      )}
      <textarea
        className="p-2 border rounded w-full block mt-4 dark:bg-gray-900 dark:text-white"
        placeholder="Enter the voice Name"
        rows={1}
        value={name}
        onChange={(e) => setName(e.target.value)}
      />
      <textarea
        className="p-2 border rounded w-full block mt-4 dark:bg-gray-900 dark:text-white"
        placeholder="Enter some text here"
        rows={5}
        value={text}
        onChange={(e) => setText(e.target.value)}
      />
      <button 
      type="submit" 
      onClick={handleSubmit} 
      className="p-2 border rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-white dark:text-black font-medium mt-4 "
      >Generate Voice</button>
      {audioUrlReturn && <audio autoPlay className="mt-4" controls src={audioUrlReturn} />}
    </div>
  );
}

function capitalize(word: string) {
  return word.charAt(0).toUpperCase() + word.substring(1);
}

const Mic = () => (
  // you can also use an icon library like `react-icons` here
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth={2}
    strokeLinecap="round"
    strokeLinejoin="round"
  >
    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
    <line x1="12" x2="12" y1="19" y2="22"></line>
  </svg>
);

const Square = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth={2}
    strokeLinecap="round"
    strokeLinejoin="round"
  >
    <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
  </svg>
);

type Status =
  | "idle"
  | "recording"
  | "transcribing"
  | "understanding"
  | "thinking"
  | "cloning"
  | "Generating Voice"
  | "speaking";

```

This example showcases how to use the `llm.cloneVoice()` method to clone a voice and generate audio in the cloned voice from the provided text. It provides a user interface where the user can record their voice, stop the recording, enter a voice name, and provide text to be converted into speech using the cloned voice. The generated audio in the cloned voice is then played back to the user.
